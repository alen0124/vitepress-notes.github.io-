import{_ as s,c as a,o as n,a as l}from"./app.b454e50a.js";const F=JSON.parse('{"title":"管理","description":"","frontmatter":{},"headers":[{"level":2,"title":"一、用户的创建、删除与修改","slug":"一、用户的创建、删除与修改","link":"#一、用户的创建、删除与修改","children":[]},{"level":2,"title":"二、备份和还原","slug":"二、备份和还原","link":"#二、备份和还原","children":[]},{"level":2,"title":"三、MongoDB 权限机制","slug":"三、mongodb-权限机制","link":"#三、mongodb-权限机制","children":[{"level":3,"title":"（1）开启验证模式","slug":"_1-开启验证模式","link":"#_1-开启验证模式","children":[]},{"level":3,"title":"（2）通过超级管理员账号登录","slug":"_2-通过超级管理员账号登录","link":"#_2-通过超级管理员账号登录","children":[]},{"level":3,"title":"练习","slug":"练习","link":"#练习","children":[]}]}],"relativePath":"02.advanced/06.mongodb/06.管理.md"}'),p={name:"02.advanced/06.mongodb/06.管理.md"},o=l(`<h1 id="管理" tabindex="-1">管理 <a class="header-anchor" href="#管理">¶</a></h1><h2 id="一、用户的创建、删除与修改" tabindex="-1">一、用户的创建、删除与修改 <a class="header-anchor" href="#一、用户的创建、删除与修改">¶</a></h2><h4 id="创建用户" tabindex="-1"><strong>创建用户</strong> <a class="header-anchor" href="#创建用户">¶</a></h4><p>首先要进入我们的admin库中，进入方法是直接使用<code>use admin</code> 就可以。进入后可以使用<code>show collections</code>来查看数据库中的集合。默认是只有一个集合的（system.version）。</p><p>创建用户可以用<code>db.createUser</code>方法来完成，参数可参考<a href="https://docs.mongodb.com/manual/tutorial/create-users/" target="_blank" rel="noreferrer">官网</a></p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createUser</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">jspang</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">pwd</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">customData</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">技术胖</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">email</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">web0432@126.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">roles</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">read</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>当然我们还可以单独配置一个数据库的权限，比如我们现在要配置<code>compay</code>数据库的权限为读写：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createUser</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">pwd</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin123456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">customData</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">技术胖</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">email</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">web0432@126.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">roles</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">role</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">readWrite</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">db</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">company</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">read</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="内置角色" tabindex="-1"><strong>内置角色</strong>： <a class="header-anchor" href="#内置角色">¶</a></h4><ol><li>数据库用户角色：<code>read</code>、<code>readWrite</code>；</li><li>数据库管理角色：<code>dbAdmin</code>、<code>dbOwner</code>、<code>userAdmin</code>;</li><li>集群管理角色：<code>clusterAdmin</code>、<code>clusterManager</code>、<code>clusterMonitor</code>、<code>hostManage</code>；</li><li>备份恢复角色：<code>backup</code>、<code>restore</code>；</li><li>所有数据库角色：<code>readAnyDatabase</code>、<code>readWriteAnyDatabase</code>、<code>userAdminAnyDatabase</code>、<code>dbAdminAnyDatabase</code></li><li>超级用户角色：<code>root</code></li><li>内部角色：__<code>system</code></li></ol><p><strong>1、数据库用户角色</strong></p><ul><li><p>read:该角色拥有数据的只读权限，系统集合以及system.indexes,system.js,system.namespaces集合除外。</p></li><li><p>readWrite:该角色拥有对应数据库的读写权限，系统集合和system.js集合除外。</p></li></ul><p><strong>2、数据库管理角色</strong></p><ul><li><p>dbAdmin:该角色拥有指定数据库数据库管理权限，包括 system.indexes, system.namespaces, system.profile集合的操作权限。该角色不拥有所有非系统集合的读权限。</p></li><li><p>dbOwner:该角色拥有指定数据库的所有权限，该角色包括：readWrite、dbAdmin、userAdmin。</p></li><li><p>userAdmin:该角色拥有指定数据库用户和角色的管理权限。包括创建用户等。</p></li></ul><p><strong>3、群集管理角色</strong></p><ul><li><p>clusterAdmin:该角色拥有群集的所有权限。该角色包含clusterManager,clusterMonitor,hostManager 角色权限。同时还要删除数据库的权限。</p></li><li><p>clusterManager:该角色拥有群集的管理和监控权限，包括对local、config数据库的访问权限。同时该角色拥有分片和复制集的管理权限。</p></li><li><p>clusterMonitor:该角色拥有群集的监控权限。</p></li><li><p>hostManager:该角色拥有群集的监控和服务管理权限。</p></li></ul><p>注意：这些角色只能在Admin数据库下创建</p><p><strong>4、备份还原角色</strong></p><ul><li><p>backup:该角色拥有备份数据的权限。</p></li><li><p>restore:该角色拥有还原备份数据的权限。</p></li></ul><p>注意：这些角色只能在Admin数据库下创建</p><p><strong>5、所有数据库角色</strong></p><p>该分类下面的角色权限和数据库角色权限一样，区别在于它拥有的是所有数据库的权限而不是指定数据库下的权限。但是不拥有system.*相关集合、local、config数据库的权限。</p><ul><li><p>readAnyDatabase</p></li><li><p>readWriteAnyDatabase</p></li><li><p>userAdminAnyDatabase</p></li><li><p>dbAdminAnyDatabase</p></li></ul><p>注意：这些角色只能在Admin数据库下创建</p><p><strong>6、超级权限角色</strong></p><ul><li>root:该角色拥有所有权限,该角色包含readWriteAnyDatabase, dbAdminAnyDatabase, userAdminAnyDatabase, clusterAdmin roles, restore, and backup角色。</li></ul><p>注意：该角色只能在创建在Admin库中</p><p>**7、内部角色 **</p><ul><li>__system:该角色为系统内部角色，比如复制集成员、mongos使用。</li></ul><h4 id="查找用户信息" tabindex="-1">查找用户信息 <a class="header-anchor" href="#查找用户信息">¶</a></h4><p>我们直接可以使用查找的方法，查找用户信息。命令很简单：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">db.system.users.find</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">db.system.users.find().pretty</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><h4 id="删除用户" tabindex="-1">删除用户： <a class="header-anchor" href="#删除用户">¶</a></h4><p>删除名利也是非常简单，直接用remove就可以删除这个用户的信息和权限。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">system</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">users</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">remove</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h4 id="建权" tabindex="-1"><strong>建权</strong> <a class="header-anchor" href="#建权">¶</a></h4><p>有时候我们要验证用户的用户名密码是否正确，就需要用到MongoDB提供的健全操作。也算是一种登录操作，不过MongoDB把这叫做建权。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">auth</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">admin123456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p>如果正确返回1，如果错误返回0。（Error：Authentication failed。）</p><h4 id="启动建权" tabindex="-1"><strong>启动建权</strong> <a class="header-anchor" href="#启动建权">¶</a></h4><p>重启MongoDB服务器，然后设置必须使用建权登录。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mongod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--auth</span></span>
<span class="line"></span></code></pre></div><p>启动后，用户登录只能用用户名和密码进行登录，原来的mongo形式链接已经不起作用了。相应的用户权限也对应妥当。实际项目中我们启动服务器必须使用建权形式。</p><h4 id="登录" tabindex="-1"><strong>登录</strong> <a class="header-anchor" href="#登录">¶</a></h4><p>如果在配置用户之后，用户想登录，可以使用mongo的形式，不过需要配置用户名密码：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mongo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">jspang</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">127.0.0.1:</span><span style="color:#F78C6C;">27017</span><span style="color:#C3E88D;">/admin</span></span>
<span class="line"></span></code></pre></div><p>这时候我们就可以用给我们的权限对数据库操作了。</p><h4 id="密码管理" tabindex="-1">密码管理 <a class="header-anchor" href="#密码管理">¶</a></h4><p><strong>修改密码</strong></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">db.updateUser(</span></span>
<span class="line"><span style="color:#89DDFF;">   &quot;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">pwd</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">abc</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="二、备份和还原" tabindex="-1">二、备份和还原 <a class="header-anchor" href="#二、备份和还原">¶</a></h2><p>安装mongodb后若安装目录bin文件夹中无数据备份和恢复工具，则需单独下载对应补充工具。<a href="https://www.mongodb.com/try/download/database-tools" target="_blank" rel="noreferrer">database-tools</a></p><p><img src="https://cdn.jsdelivr.net/gh/jalin0125/noteImages/vitepress/mongodb/1.png" alt=""></p><p>将下载包解压后的工具命令放到MongoDB的bin目录下。</p><h4 id="_1-数据备份" tabindex="-1">（1）数据备份 <a class="header-anchor" href="#_1-数据备份">¶</a></h4><p>先来看一下<code>mongodump</code>备份的基本格式，其实这就是条在终端中执行的命令。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mongodump</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-h</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#服务器IP地址127.0.0.1（一般不写，默认本机）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-port</span><span style="color:#A6ACCD;">                           </span><span style="color:#676E95;font-style:italic;">#端口（一般不写，默认27017） </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-u</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#user账号</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-p</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#password密码</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-d</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#指明database数据库名（数据库不写则导出全部数据库）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-c</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#指明collection的名字</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-o</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#open备份至指定目录中</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-q</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#指明导出数据的过滤条件</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">--authenticationDatabase</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">admin</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#验证库</span></span>
<span class="line"></span></code></pre></div><ul><li>备份全部数据库</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 默认无账户</span></span>
<span class="line"><span style="color:#FFCB6B;">mongodump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodump</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 备份所有MongoDB里的库到E盘的mongodb/bak文件夹下</span></span>
<span class="line"><span style="color:#FFCB6B;">mongodump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodb</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">ak</span></span>
<span class="line"></span></code></pre></div><ul><li>备份指定数据库</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 默认</span></span>
<span class="line"><span style="color:#FFCB6B;">mongodump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-h</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">127.0.0.1:</span><span style="color:#F78C6C;">27017</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodump</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 备份shop数据库</span></span>
<span class="line"><span style="color:#FFCB6B;">mongodump</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-o</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodb</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">ak</span></span>
<span class="line"></span></code></pre></div><h4 id="_2-数据恢复" tabindex="-1">（2）数据恢复 <a class="header-anchor" href="#_2-数据恢复">¶</a></h4><p>备份好后，如果数据库有意外或者遭受到了攻击，我们要进行回复数据库，这时候就可以使用<code>mongorestore</code>命令。</p><p>还是先看一下它的基本格式</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mongorestore</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-h</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;font-style:italic;"># 127.0.0.1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-port</span><span style="color:#A6ACCD;">                  </span><span style="color:#676E95;font-style:italic;"># 27017</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-u</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;font-style:italic;"># user</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-p</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;font-style:italic;"># password</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">-d</span><span style="color:#A6ACCD;">                     </span><span style="color:#676E95;font-style:italic;"># 不写则还原全部数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">--drop</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;font-style:italic;"># 先删除数据库再导入</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">path&gt;</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;font-style:italic;"># 备份数据库目录</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">--authenticationDatabase</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">admin</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#验证库</span></span>
<span class="line"></span></code></pre></div><p>比如我们现在不小心删除了一个collections的数据，要进行恢复。现在删除<code>randomInfo</code>集合。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">db.randomInfo.drop</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><ul><li>恢复全部数据</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mongorestore</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodump</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">mongorestore</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodb</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">ak</span></span>
<span class="line"></span></code></pre></div><ul><li>恢复指定数据</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">mongorestore</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-h</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">127.0.0.1:</span><span style="color:#F78C6C;">27017</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">D:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodump</span><span style="color:#A6ACCD;">\\s</span><span style="color:#C3E88D;">hop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">mongorestore</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">123456</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--drop</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">e:</span><span style="color:#A6ACCD;">\\m</span><span style="color:#C3E88D;">ongodb</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">ak</span><span style="color:#A6ACCD;">\\s</span><span style="color:#C3E88D;">hop</span></span>
<span class="line"></span></code></pre></div><h2 id="三、mongodb-权限机制" tabindex="-1">三、MongoDB 权限机制 <a class="header-anchor" href="#三、mongodb-权限机制">¶</a></h2><h3 id="_1-开启验证模式" tabindex="-1">（1）开启验证模式 <a class="header-anchor" href="#_1-开启验证模式">¶</a></h3><p>即需输入账户/密码才可登录使用。</p><p><strong>操作步骤</strong></p><p>步骤1：添加超级管理员</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> mongo</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> use admin</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> db.createUser</span><span style="color:#89DDFF;">({</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">pwd</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">roles:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        role: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,       </span><span style="color:#676E95;font-style:italic;"># 角色</span></span>
<span class="line"><span style="color:#A6ACCD;">        db: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">         </span><span style="color:#676E95;font-style:italic;"># 所属数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span>
<span class="line"></span></code></pre></div><p>步骤2：退出卸载服务</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">C:\\Program</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Files</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ongoDB</span><span style="color:#A6ACCD;">\\S</span><span style="color:#C3E88D;">erver</span><span style="color:#A6ACCD;">\\4</span><span style="color:#C3E88D;">.</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">mongod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--remove</span></span>
<span class="line"></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/leijialin/noteImages/notes/mongodb/06_1.png" alt=""></p><div class="warning custom-block"><p class="custom-block-title">注意 cmd命令窗口需以管理员身份打开</p></div><p>步骤3：重新安装需要身份验证的mongodb服务</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">C:\\Program</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Files</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ongoDB</span><span style="color:#A6ACCD;">\\S</span><span style="color:#C3E88D;">erver</span><span style="color:#A6ACCD;">\\4</span><span style="color:#C3E88D;">.</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">mongod</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--dbpath</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">C:\\Program Files\\MongoDB\\Server\\4.4\\data</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--logpath</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">C:\\Program Files\\MongoDB\\Server\\4.4\\log\\mongod2.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--auth</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">C:\\Program</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Files</span><span style="color:#A6ACCD;">\\M</span><span style="color:#C3E88D;">ongoDB</span><span style="color:#A6ACCD;">\\S</span><span style="color:#C3E88D;">erver</span><span style="color:#A6ACCD;">\\4</span><span style="color:#C3E88D;">.</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">\\b</span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;">n</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;">net</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mongodb</span></span>
<span class="line"></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/leijialin/noteImages/notes/mongodb/06_2.png" alt=""></p><div class="warning custom-block"><p class="custom-block-title">注意</p><p>1、cmd命令窗口需以管理员身份打开</p><p>2、log日志文件不能重名，需重新新建一个</p></div><p>步骤4：启动服务，测试登录效果</p><p><img src="https://cdn.jsdelivr.net/gh/leijialin/noteImages/notes/mongodb/06_3.png" alt=""></p><h3 id="_2-通过超级管理员账号登录" tabindex="-1">（2）通过超级管理员账号登录 <a class="header-anchor" href="#_2-通过超级管理员账号登录">¶</a></h3><ul><li>方法1</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># mongo 服务器IP地址:端口/数据库 -u 用户名 -p 密码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> mongo 127.0.0.1:</span><span style="color:#F78C6C;">27017</span><span style="color:#A6ACCD;">/admin -u root -p </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/leijialin/noteImages/notes/mongodb/06_4.png" alt=""></p><ul><li>方法2</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 先登录</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 再选择数据库</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输入 db.auth(name, password)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">db.auth(&#39;root&#39;,&#39;123456&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/leijialin/noteImages/notes/mongodb/06_5.png" alt=""></p><h3 id="练习" tabindex="-1">练习 <a class="header-anchor" href="#练习">¶</a></h3><ul><li>需求</li></ul><p>1、添加shop1可以读shop数据库 2、添加shop2可以读写shop数据库</p><ul><li>准备（创建测试数据）</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">for</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i++</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">db.goods.insert(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">goodsName</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> + i,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">: i</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">db.goods.find</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div><ul><li>添加用户并设置权限</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">db.createUser(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">shop1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">pwd</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">roles:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        role: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">read</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        db: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">shop</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">db.createUser(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">user:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">shop2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">pwd</span><span style="color:#FFCB6B;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">roles:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        role: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">readWrite</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        db: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">shop</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">提示</p><p><code>use shop</code>进入shop数据库创建用户，但是数据还是存储在admin数据库中。</p></div><ul><li>验证用户权限（shop1只能读）</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> mongo localhost:</span><span style="color:#F78C6C;">27017</span><span style="color:#A6ACCD;">/shop -u shop1 -p </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> show collections</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">db.goods.find</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> db.goods.insert</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">测试新增一条数据</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 错误（该用户权限只能读）</span></span>
<span class="line"></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/leijialin/noteImages/notes/mongodb/06_6.png" alt=""></p><ul><li>验证用户权限（shop2可读可写）</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> mongo localhost:</span><span style="color:#F78C6C;">27017</span><span style="color:#A6ACCD;">/shop -u shop2 -p </span><span style="color:#F78C6C;">123456</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> show collections</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">db.goods.find</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> db.goods.insert</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">测试新增一条数据</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span></code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/leijialin/noteImages/notes/mongodb/06_7.png" alt=""></p>`,108),e=[o];function t(c,r,y,C,D,i){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{F as __pageData,d as default};
